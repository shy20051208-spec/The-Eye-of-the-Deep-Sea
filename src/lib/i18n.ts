export type Locale = "en" | "zh";

export const locales: Locale[] = ["en", "zh"];
export const defaultLocale: Locale = "en";

export const messages = {
  en: {
    common: {
      language: "Language",
      english: "English",
      chinese: "中文",
      allRoles: "All Roles",
      toggleTheme: "Toggle theme",
      searchDatasets: "Search datasets...",
      searchUsers: "Search users...",
      viewAll: "View All",
      edit: "Edit",
      export: "Export",
      aiReady: "AI Ready",
      selectStation: "Select station",
      auto: "Auto",
      success: "Success",
      previous: "Previous",
      next: "Next",
      previousAria: "Go to previous page",
      nextAria: "Go to next page",
    },
    nav: {
      dataManagement: "Data Management",
      visualization: "Visualization",
      analysis: "Intelligent Analysis",
      reportExport: "Report Export",
      systemSettings: "System Settings",
      appName: "DeepSea Eye",
      appSubtitle: "CTD Analysis",
      userName: "Dr. Wang",
      userRole: "Researcher",
    },
    status: {
      verified: "Verified",
      pending: "Pending",
      flagged: "Flagged",
      active: "Active",
      inactive: "Inactive",
    },
    roles: {
      admin: "Admin",
      researcher: "Researcher",
      analyst: "Analyst",
      student: "Student",
      viewer: "Viewer",
    },
    departments: {
      marineScience: "Marine Science",
      oceanography: "Oceanography",
      dataScience: "Data Science",
      physics: "Physics",
      geography: "Geography",
    },
    dataManagement: {
      title: "Data Management",
      dragDropTitle: "Drag & drop CTD data files here, or click to browse",
      dragDropSubtitle:
        "Supports CSV, NetCDF (.nc), Excel — Max 500MB per file",
      uploadCtdData: "Upload CTD Data",
      filters: {
        allStations: "All Stations",
        argo: "Argo",
        cruise: "Cruise",
        mooring: "Mooring",
        allSeaAreas: "All Sea Areas",
        northPacific: "North Pacific",
        southPacific: "South Pacific",
        atlantic: "Atlantic",
        indianOcean: "Indian Ocean",
        dateRangeDefault: "2024-01 to 2024-06",
        last7Days: "Last 7 days",
        last30Days: "Last 30 days",
        last90Days: "Last 90 days",
        lastYear: "Last year",
        depthDefault: "Depth: 0-500 m",
        depth0to100: "0-100m",
        depth0to500: "0-500m",
        depth0to1000: "0-1000m",
        depth0to2000: "0-2000m",
      },
      stats: {
        totalDatasets: "Total Datasets",
        totalDatasetsHelper: "+12% vs last month",
        ctdStations: "CTD Stations",
        ctdStationsHelper: "78 coastal sites",
        avgTemp: "Avg Temp",
        avgTempHelper: "Mean profile temp",
        avgSalinity: "Avg Salinity",
        avgSalinityHelper: "Mean salinity",
      },
      table: {
        station: "Station",
        date: "Date",
        depth: "Depth (m)",
        temp: "Temp (℃)",
        salinity: "Salinity (PSU)",
        density: "Density (kg/m³)",
        status: "Status",
        actions: "Actions",
      },
      pagination: {
        showingRecords: "Showing {{range}} of {{total}} records",
      },
    },
    visualization: {
      title: "Data Visualization",
      tabs: {
        overview: "Overview",
        timeSeries: "Time Series",
        statistics: "Statistics",
      },
      chartPlaceholder: "Chart placeholder",
      timeSeriesTitle: "Time Series & Statistics",
      sparkline: "Sparkline",
      charts: {
        depthTempProfile: "Depth-Temperature Profile",
        tsDiagram: "T-S Diagram",
        depthSalinityProfile: "Depth-Salinity Profile",
        temperatureHeatmap: "Temperature Heatmap (ST-001)",
      },
      legend: {
        surface: "Surface",
        thermocline: "Thermocline",
        deep: "Deep",
        layer1: "Layer 1",
        layer2: "Layer 2",
        layer3: "Layer 3",
        inshore: "Inshore",
        shelf: "Shelf",
        offshore: "Offshore",
        temp5: "5℃",
        temp16: "16℃",
        temp28: "28℃",
      },
      timeSeriesCards: {
        monthlyTempTrend: "Monthly Temperature Trend",
        seasonalSalinityPatterns: "Seasonal Salinity Patterns",
        densityStratification: "Density Stratification",
        stationCoverageMap: "Station Coverage Map",
      },
      stations: {
        station049: "Station ST-049",
        station115: "Station ST-115",
        station221: "Station ST-221",
        station305: "Station ST-305",
      },
    },
    analysis: {
      title: "Intelligent Analysis",
      runAnalysis: "Run Analysis",
      generateReport: "Generate Report",
      config: {
        title: "Analysis Configuration",
        analysisType: "Analysis Type",
        anomalyDetection: "Anomaly Detection",
        thermoclineMethod: "Thermocline Method",
        gradientBased: "Gradient-based",
        depthRange: "Depth Range (m)",
        gradientThreshold: "Gradient Threshold",
      },
      summaryTitle: "Statistical Summary - {{station}}",
      summaryCards: {
        meanTemp: "Mean Temp",
        meanSalinity: "Mean Salinity",
        density: "Density",
      },
      thermocline: {
        title: "Thermocline / Pycnocline Detection",
        layersDetected: "{{count}} layers detected",
        placeholder: "Thermocline chart placeholder",
        layer1: "Thermocline 1",
        pycnocline: "Pycnocline",
        halocline: "Halocline",
      },
      oceanModelOutputs: "Ocean Model Outputs",
      modelCards: {
        waveHeight: "Wave Height",
        salinityFlux: "Salinity Flux",
        currentSpeed: "Current Speed",
      },
      waterMass: {
        title: "Water Mass Classification",
        layerLabel: "Layer",
        items: {
          layer1: "0-50 m | 22-25℃",
          layer2: "50-200 m | 12-20℃",
          layer3: "200-500 m | 5-12℃",
        },
      },
      activity: {
        title: "Analysis Activity",
        items: {
          thermoComplete: "Thermocline detection completed",
          modelRefreshed: "Model outputs refreshed",
          waterMassRunning: "Water mass classification running",
          datasetQueued: "New dataset queued",
        },
        timeAgo: "5 min ago",
      },
    },
    reportExport: {
      title: "Report Export",
      generateReport: "Generate Report",
      topbar: {
        exportPdf: "Export PDF",
        exportWord: "Export Word",
        print: "Print",
      },
      reportPreview: "Report Preview",
      reportTitle: "CTD Data Analysis Report",
      reportSubtitle: "Station ST-001 | South China Sea | 2024-03-15",
      reportOrg:
        "Institute of Oceanology, Chinese Academy of Sciences",
      previewSections: {
        section1Title: "1. Station Overview",
        section1Body:
          "Station ST-001 is located at 18.22°N, 115.73°E in the northern South China Sea. CTD measurements were conducted on March 15, 2024, with a maximum depth of 500.0 m. A total of 42 vertical profiles were collected across the survey period.",
        section2Title: "2. Temperature & Salinity Summary",
        section3Title: "3. Thermocline Analysis",
        section3Body:
          "A strong seasonal thermocline was detected at 50.0 - 80.0 m depth with a temperature gradient of -0.42 ℃/m. The pycnocline was identified at 120.0 - 160.0 m with a density gradient of -0.28 kg/m³/m. A weak halocline was observed between 200.0 - 240.0 m.",
        section4Title: "4. T-S Diagram & Water Mass",
        section4Body:
          "The Temperature-Salinity diagram reveals three distinct water masses in the survey area. Surface water (0-50m) exhibits high temperature (22-24℃) and moderate salinity (33.8-34.2 PSU). Intermediate water shows mixing characteristics.",
        figure1Title: "Figure 1: Depth-Temperature Profile",
        figure1Note: "[Chart will be embedded in exported report]",
        figure2Title: "Figure 2: T-S Diagram",
        table: {
          header: {
            parameter: "Parameter",
            value: "Value",
            notes: "Notes",
          },
          row1: {
            label: "Mean Temperature",
            note: "Stable",
          },
          row2: {
            label: "Mean Salinity",
            note: "Normal",
          },
          row3: {
            label: "Density Gradient",
            note: "Low",
          },
        },
      },
      exportSettings: {
        title: "Export Settings",
        reportTemplate: "Report Template",
        templatePlaceholder: "Template",
        standardTemplate: "Standard CTD Report",
        cruiseSummary: "Cruise Summary",
        exportFormat: "Export Format",
        includeSections: "Include Sections",
        station: "Station",
        dateRange: "Date Range",
        author: "Author",
        institution: "Institution",
        stationPlaceholder: "Station ID",
        dateRangePlaceholder: "From — To",
        authorPlaceholder: "Author Name",
        institutionPlaceholder: "Institution",
        stationValue: "ST-001 — South China Sea",
        stationOption2: "ST-002 — North Pacific",
        dateRangeValue: "2024-01-15 — 2024-03-20",
        authorValue: "Dr. Zhang Wei",
        institutionValue: "Ocean University of China",
        sections: {
          stationOverview: "Station Overview",
          tsSummaryTable: "T&S Summary Table",
          thermoclineAnalysis: "Thermocline Analysis",
          depthProfiles: "Depth Profiles",
          tsDiagram: "T-S Diagram",
          waterMassClassification: "Water Mass Classification",
        },
        toggles: {
          pageNumbers: "Page Numbers",
          headerFooter: "Header & Footer",
          tableOfContents: "Table of Contents",
        },
      },
    },
    systemManagement: {
      title: "System Management",
      tabs: {
        userManagement: "User Management",
        operationLogs: "Operation Logs",
      },
      backup: {
        lastBackup: "Last Backup",
        storageUsed: "Storage Used",
        nextScheduled: "Next Scheduled",
        todayTime: "Today, 03:00 AM",
        tomorrowTime: "Tomorrow, 03:00 AM",
      },
      users: {
        table: {
          user: "User",
          email: "Email",
          role: "Role",
          department: "Department",
          lastActive: "Last Active",
          status: "Status",
          actions: "Actions",
        },
        footer: "Showing {{count}} of {{total}} users",
      },
      logs: {
        title: "Recent Operation Logs",
        uploadedDataset: "uploaded dataset CTD-2024-0315.csv",
        ranAnalysis: "ran thermocline analysis on ST-001",
        exportedReport: "exported report as PDF for ST-003",
        revokedAccess: "revoked access for user Liu Fang",
        modifiedMetadata: "modified station ST-007 metadata",
        time: {
          min2: "2 min ago",
          hour1: "1 hour ago",
          hour3: "3 hours ago",
          hour5: "5 hours ago",
          day2: "2 days ago",
          day14: "14 days ago",
          yesterday: "Yesterday",
        },
      },
    },
  },
  zh: {
    common: {
      language: "语言",
      english: "英文",
      chinese: "中文",
      allRoles: "全部角色",
      toggleTheme: "切换主题",
      searchDatasets: "搜索数据集...",
      searchUsers: "搜索用户...",
      viewAll: "查看全部",
      edit: "编辑",
      export: "导出",
      aiReady: "AI 就绪",
      selectStation: "选择测站",
      auto: "自动",
      success: "成功",
      previous: "上一页",
      next: "下一页",
      previousAria: "转到上一页",
      nextAria: "转到下一页",
    },
    nav: {
      dataManagement: "数据管理",
      visualization: "可视化",
      analysis: "智能分析",
      reportExport: "报告导出",
      systemSettings: "系统设置",
      appName: "DeepSea Eye",
      appSubtitle: "CTD 分析",
      userName: "王博士",
      userRole: "研究员",
    },
    status: {
      verified: "已验证",
      pending: "待处理",
      flagged: "已标记",
      active: "活跃",
      inactive: "停用",
    },
    roles: {
      admin: "管理员",
      researcher: "研究员",
      analyst: "分析师",
      student: "学生",
      viewer: "观察者",
    },
    departments: {
      marineScience: "海洋科学",
      oceanography: "海洋学",
      dataScience: "数据科学",
      physics: "物理",
      geography: "地理",
    },
    dataManagement: {
      title: "数据管理",
      dragDropTitle: "拖拽 CTD 数据文件到此处，或点击浏览",
      dragDropSubtitle: "支持 CSV、NetCDF (.nc)、Excel — 单文件最大 500MB",
      uploadCtdData: "上传 CTD 数据",
      filters: {
        allStations: "全部测站",
        argo: "Argo",
        cruise: "航次",
        mooring: "系泊",
        allSeaAreas: "全部海域",
        northPacific: "北太平洋",
        southPacific: "南太平洋",
        atlantic: "大西洋",
        indianOcean: "印度洋",
        dateRangeDefault: "2024-01 至 2024-06",
        last7Days: "近 7 天",
        last30Days: "近 30 天",
        last90Days: "近 90 天",
        lastYear: "近一年",
        depthDefault: "深度：0-500 m",
        depth0to100: "0-100m",
        depth0to500: "0-500m",
        depth0to1000: "0-1000m",
        depth0to2000: "0-2000m",
      },
      stats: {
        totalDatasets: "数据集总数",
        totalDatasetsHelper: "较上月 +12%",
        ctdStations: "CTD 测站",
        ctdStationsHelper: "78 个近岸站点",
        avgTemp: "平均温度",
        avgTempHelper: "剖面平均温度",
        avgSalinity: "平均盐度",
        avgSalinityHelper: "平均盐度",
      },
      table: {
        station: "测站",
        date: "日期",
        depth: "深度 (m)",
        temp: "温度 (℃)",
        salinity: "盐度 (PSU)",
        density: "密度 (kg/m³)",
        status: "状态",
        actions: "操作",
      },
      pagination: {
        showingRecords: "显示 {{range}} / 共 {{total}} 条记录",
      },
    },
    visualization: {
      title: "数据可视化",
      tabs: {
        overview: "概览",
        timeSeries: "时间序列",
        statistics: "统计",
      },
      chartPlaceholder: "图表占位",
      timeSeriesTitle: "时间序列与统计",
      sparkline: "迷你图",
      charts: {
        depthTempProfile: "深度-温度剖面",
        tsDiagram: "T-S 图",
        depthSalinityProfile: "深度-盐度剖面",
        temperatureHeatmap: "温度热力图 (ST-001)",
      },
      legend: {
        surface: "表层",
        thermocline: "跃温层",
        deep: "深层",
        layer1: "层级 1",
        layer2: "层级 2",
        layer3: "层级 3",
        inshore: "近岸",
        shelf: "陆架",
        offshore: "外海",
        temp5: "5℃",
        temp16: "16℃",
        temp28: "28℃",
      },
      timeSeriesCards: {
        monthlyTempTrend: "月度温度趋势",
        seasonalSalinityPatterns: "季节性盐度变化",
        densityStratification: "密度分层",
        stationCoverageMap: "测站覆盖分布",
      },
      stations: {
        station049: "测站 ST-049",
        station115: "测站 ST-115",
        station221: "测站 ST-221",
        station305: "测站 ST-305",
      },
    },
    analysis: {
      title: "智能分析",
      runAnalysis: "运行分析",
      generateReport: "生成报告",
      config: {
        title: "分析配置",
        analysisType: "分析类型",
        anomalyDetection: "异常检测",
        thermoclineMethod: "跃温层方法",
        gradientBased: "梯度法",
        depthRange: "深度范围 (m)",
        gradientThreshold: "梯度阈值",
      },
      summaryTitle: "统计摘要 - {{station}}",
      summaryCards: {
        meanTemp: "平均温度",
        meanSalinity: "平均盐度",
        density: "密度",
      },
      thermocline: {
        title: "跃温层 / 密度跃层检测",
        layersDetected: "检测到 {{count}} 层",
        placeholder: "跃温层图表占位",
        layer1: "跃温层 1",
        pycnocline: "密度跃层",
        halocline: "盐度跃层",
      },
      oceanModelOutputs: "海洋模式输出",
      modelCards: {
        waveHeight: "波高",
        salinityFlux: "盐度通量",
        currentSpeed: "流速",
      },
      waterMass: {
        title: "水团分类",
        layerLabel: "层级",
        items: {
          layer1: "0-50 m | 22-25℃",
          layer2: "50-200 m | 12-20℃",
          layer3: "200-500 m | 5-12℃",
        },
      },
      activity: {
        title: "分析动态",
        items: {
          thermoComplete: "跃温层检测完成",
          modelRefreshed: "模式输出已刷新",
          waterMassRunning: "水团分类运行中",
          datasetQueued: "新数据集已排队",
        },
        timeAgo: "5 分钟前",
      },
    },
    reportExport: {
      title: "报告导出",
      generateReport: "生成报告",
      topbar: {
        exportPdf: "导出 PDF",
        exportWord: "导出 Word",
        print: "打印",
      },
      reportPreview: "报告预览",
      reportTitle: "CTD 数据分析报告",
      reportSubtitle: "测站 ST-001 | 南海 | 2024-03-15",
      reportOrg: "中国科学院海洋研究所",
      previewSections: {
        section1Title: "1. 测站概览",
        section1Body:
          "测站 ST-001 位于南海北部 18.22°N，115.73°E。2024-03-15 进行 CTD 测量，最大深度 500.0 m。调查期间共采集 42 条剖面。",
        section2Title: "2. 温度与盐度摘要",
        section3Title: "3. 跃温层分析",
        section3Body:
          "在 50.0 - 80.0 m 深度检测到明显季节性跃温层，温度梯度为 -0.42 ℃/m。在 120.0 - 160.0 m 识别出密度跃层，密度梯度为 -0.28 kg/m³/m。200.0 - 240.0 m 处观察到弱盐度跃层。",
        section4Title: "4. T-S 图与水团",
        section4Body:
          "温盐图揭示了调查海域三类水团。表层水（0-50m）温度较高（22-24℃），盐度适中（33.8-34.2 PSU），中层水表现出混合特征。",
        figure1Title: "图 1：深度-温度剖面",
        figure1Note: "[图表将在导出的报告中嵌入]",
        figure2Title: "图 2：T-S 图",
        table: {
          header: {
            parameter: "指标",
            value: "数值",
            notes: "备注",
          },
          row1: {
            label: "平均温度",
            note: "稳定",
          },
          row2: {
            label: "平均盐度",
            note: "正常",
          },
          row3: {
            label: "密度梯度",
            note: "较低",
          },
        },
      },
      exportSettings: {
        title: "导出设置",
        reportTemplate: "报告模板",
        templatePlaceholder: "模板",
        standardTemplate: "标准 CTD 报告",
        cruiseSummary: "航次摘要",
        exportFormat: "导出格式",
        includeSections: "包含章节",
        station: "测站",
        dateRange: "日期范围",
        author: "作者",
        institution: "机构",
        stationPlaceholder: "测站编号",
        dateRangePlaceholder: "起止时间",
        authorPlaceholder: "作者姓名",
        institutionPlaceholder: "机构",
        stationValue: "ST-001 — 南海",
        stationOption2: "ST-002 — 北太平洋",
        dateRangeValue: "2024-01-15 — 2024-03-20",
        authorValue: "张伟博士",
        institutionValue: "中国海洋大学",
        sections: {
          stationOverview: "测站概览",
          tsSummaryTable: "温盐摘要表",
          thermoclineAnalysis: "跃温层分析",
          depthProfiles: "深度剖面",
          tsDiagram: "T-S 图",
          waterMassClassification: "水团分类",
        },
        toggles: {
          pageNumbers: "页码",
          headerFooter: "页眉与页脚",
          tableOfContents: "目录",
        },
      },
    },
    systemManagement: {
      title: "系统管理",
      tabs: {
        userManagement: "用户管理",
        operationLogs: "操作日志",
      },
      backup: {
        lastBackup: "上次备份",
        storageUsed: "存储使用",
        nextScheduled: "下次计划",
        todayTime: "今天 03:00",
        tomorrowTime: "明天 03:00",
      },
      users: {
        table: {
          user: "用户",
          email: "邮箱",
          role: "角色",
          department: "部门",
          lastActive: "最近活跃",
          status: "状态",
          actions: "操作",
        },
        footer: "显示 {{count}} / 共 {{total}} 位用户",
      },
      logs: {
        title: "近期操作日志",
        uploadedDataset: "上传数据集 CTD-2024-0315.csv",
        ranAnalysis: "执行了 ST-001 跃温层分析",
        exportedReport: "导出了 ST-003 的 PDF 报告",
        revokedAccess: "撤销了用户刘芳的访问权限",
        modifiedMetadata: "修改了测站 ST-007 元数据",
        time: {
          min2: "2 分钟前",
          hour1: "1 小时前",
          hour3: "3 小时前",
          hour5: "5 小时前",
          day2: "2 天前",
          day14: "14 天前",
          yesterday: "昨天",
        },
      },
    },
  },
} as const;

function formatMessage(message: string, params?: Record<string, string | number>) {
  if (!params) return message;
  return message.replace(/\{\{(\w+)\}\}/g, (_, key) =>
    params[key] !== undefined ? String(params[key]) : ""
  );
}

export function getMessage(
  locale: Locale,
  key: string,
  params?: Record<string, string | number>
) {
  const parts = key.split(".");
  let current: unknown = messages[locale];

  for (const part of parts) {
    if (typeof current !== "object" || current === null || !(part in current)) {
      return key;
    }
    current = (current as Record<string, unknown>)[part];
  }

  if (typeof current !== "string") {
    return key;
  }

  return formatMessage(current, params);
}
